<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T37U3">K</span>,<span class="var type1" id="S3T15U4">Cov_x_y</span>] = fcn(<span class="var type1" id="S4T2U7">H</span>,<span class="var type1" id="S5T1U8">P_pre</span>,<span class="var type1" id="S6T15U9">S_k</span>,<span class="var type1" id="S7T1U10">UF</span>,<span class="var type1" id="S8T1U11">P_d</span>,<span class="var type1" id="S9T4U12">trig_1</span>,<span class="var type1" id="S10T1U13">U</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line">    coder.varsize(<span class="string">'K_temp'</span>,[18,12],[0,1]);</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line">    coder.varsize(<span class="string">'Cov_x_y'</span>,[12,12],[1,1]);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line">    <span class="comment">%coder.varsize('H',[12,18],[1,0]);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">    coder.varsize(<span class="string">'Sk'</span>,[12,12],[1,1]);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line">    <span class="mxinfo " id="T28:U10"><span class="var type1" id="S12T28U58">K_temp</span> = <span class="mxinfo " id="T10:U12"><span class="mxinfo " id="T10:U13"><span class="var type1" id="S5T1U61">P_pre</span>*<span class="mxinfo " id="T3:U15"><span class="var type1" id="S4T2U63">H</span>'</span></span>*<span class="mxinfo " id="T3:U17">inv(<span class="mxinfo " id="T3:U18"><span class="mxinfo " id="T3:U19"><span class="mxinfo " id="T14:U20"><span class="var type1" id="S4T2U69">H</span>*<span class="var type1" id="S5T1U70">P_pre</span></span>*<span class="mxinfo " id="T3:U23"><span class="var type1" id="S4T2U72">H</span>'</span></span> + <span class="var type1" id="S6T15U73">S_k</span></span>)</span></span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T4:U26"><span class="var type1" id="S9T4U77">trig_1</span> == <span class="mxinfo " id="T7:U28">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">        <span class="mxinfo " id="T37:U29"><span class="var type1" id="S2T37U81">K</span> = <span class="mxinfo " id="T10:U31"><span class="var type1" id="S12T28U83">K_temp</span>(<span class="mxinfo " id="T38:U33"><span class="mxinfo " id="T7:U34">1</span>:<span class="mxinfo " id="T7:U35">18</span></span>,<span class="mxinfo " id="T39:U36">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">        <span class="mxinfo " id="T15:U37"><span class="var type1" id="S3T15U90">Cov_x_y</span> = <span class="mxinfo " id="T3:U39"><span class="mxinfo " id="T3:U40"><span class="mxinfo " id="T14:U41"><span class="var type1" id="S4T2U94">H</span>*<span class="var type1" id="S5T1U95">P_pre</span></span>*<span class="mxinfo " id="T3:U44"><span class="var type1" id="S4T2U97">H</span>'</span></span> + <span class="var type1" id="S6T15U98">S_k</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">        <span class="mxinfo " id="T29:U47"><span class="var type1" id="S14T29U102">H_d</span> = <span class="mxinfo " id="T29:U49"><span class="var type1" id="S4T2U104">H</span>(<span class="mxinfo " id="T40:U51"><span class="mxinfo " id="T7:U52">1</span>:<span class="mxinfo " id="T7:U53">6</span></span>,<span class="mxinfo " id="T39:U54">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">        <span class="mxinfo " id="T29:U55"><span class="var type1" id="S15T29U111">H_k</span> = <span class="mxinfo " id="T29:U57"><span class="var type1" id="S4T2U113">H</span>(<span class="mxinfo " id="T40:U59"><span class="mxinfo " id="T7:U60">7</span>:<span class="mxinfo " id="T7:U61">12</span></span>,<span class="mxinfo " id="T39:U62">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">        <span class="mxinfo " id="T34:U63"><span class="var type1" id="S16T34U120">A</span> = <span class="mxinfo " id="T34:U65">[<span class="mxinfo " id="T31:U66"><span class="var type1" id="S8T1U124">P_d</span>*<span class="mxinfo " id="T30:U68"><span class="var type1" id="S14T29U126">H_d</span>'</span></span>;<span class="mxinfo " id="T31:U70"><span class="var type1" id="S5T1U129">P_pre</span>*<span class="mxinfo " id="T30:U72"><span class="var type1" id="S15T29U131">H_k</span>'</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">        <span class="mxinfo " id="T35:U74"><span class="var type1" id="S17T35U134">B</span> = <span class="mxinfo " id="T35:U76">[<span class="mxinfo " id="T41:U77"><span class="mxinfo " id="T33:U78"><span class="mxinfo " id="T33:U79"><span class="mxinfo " id="T32:U80"><span class="var type1" id="S14T29U140">H_d</span>*<span class="var type1" id="S8T1U141">P_d</span></span>*<span class="mxinfo " id="T30:U83"><span class="var type1" id="S14T29U143">H_d</span>'</span></span> + <span class="mxinfo " id="T33:U85"><span class="var type1" id="S6T15U145">S_k</span>(<span class="mxinfo " id="T40:U87"><span class="mxinfo " id="T7:U88">1</span>:<span class="mxinfo " id="T7:U89">6</span></span>,<span class="mxinfo " id="T40:U90"><span class="mxinfo " id="T7:U91">1</span>:<span class="mxinfo " id="T7:U92">6</span></span>)</span></span>, <span class="mxinfo " id="T33:U93"><span class="mxinfo " id="T32:U94"><span class="var type1" id="S14T29U154">H_d</span>*<span class="var type1" id="S10T1U155">U</span></span>*<span class="mxinfo " id="T30:U97"><span class="var type1" id="S15T29U157">H_k</span>'</span></span></span>; <span class="mxinfo " id="T41:U99"><span class="mxinfo " id="T33:U100"><span class="mxinfo " id="T32:U101"><span class="var type1" id="S15T29U161">H_k</span>*<span class="mxinfo " id="T1:U103"><span class="var type1" id="S10T1U163">U</span>'</span></span>*<span class="mxinfo " id="T30:U105"><span class="var type1" id="S14T29U165">H_d</span>'</span></span>, <span class="mxinfo " id="T33:U107"><span class="mxinfo " id="T33:U108"><span class="mxinfo " id="T32:U109"><span class="var type1" id="S15T29U169">H_k</span>*<span class="var type1" id="S5T1U170">P_pre</span></span>*<span class="mxinfo " id="T30:U112"><span class="var type1" id="S15T29U172">H_k</span>'</span></span> + <span class="mxinfo " id="T33:U114"><span class="var type1" id="S6T15U174">S_k</span>(<span class="mxinfo " id="T40:U116"><span class="mxinfo " id="T7:U117">7</span>:<span class="mxinfo " id="T7:U118">12</span></span>,<span class="mxinfo " id="T40:U119"><span class="mxinfo " id="T7:U120">7</span>:<span class="mxinfo " id="T7:U121">12</span></span>)</span></span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">        <span class="var type0" id="S2T0U183">K</span> = <span class="message error" id="M1F1C"><span class="var type1" id="S16T34U185">A</span>*<span class="mxinfo " id="T35:U123">inv(<span class="var type1" id="S17T35U188">B</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">        <span class="mxinfo " id="T15:U125"><span class="var type1" id="S3T15U191">Cov_x_y</span> = <span class="var type1" id="S17T35U192">B</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">                </span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">    </span></span>
</pre>
